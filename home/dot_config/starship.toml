# ==========================================================================
#  Starship prompt — sleek arrows, pipes, icons, vi-mode aware
#  Docs: https://starship.rs/config/
# ==========================================================================

# Palette
palette = "catppuccin_mocha"

[palettes.catppuccin_mocha]
rosewater = "#f5e0dc"
flamingo  = "#f2cdcd"
pink      = "#f5c2e7"
mauve     = "#cba6f7"
red       = "#f38ba8"
maroon    = "#eba0ac"
peach     = "#fab387"
yellow    = "#f9e2af"
green     = "#a6e3a1"
teal      = "#94e2d5"
sky       = "#89dceb"
sapphire  = "#74c7ec"
blue      = "#89b4fa"
lavender  = "#b4befe"
text      = "#cdd6f4"
subtext1  = "#bac2de"
subtext0  = "#a6adc8"
overlay2  = "#9399b2"
overlay1  = "#7f849c"
overlay0  = "#6c7086"
surface2  = "#585b70"
surface1  = "#45475a"
surface0  = "#313244"
base      = "#1e1e2e"
mantle    = "#181825"
crust     = "#11111b"

# --------------------------------------------------------------------------
# Layout — two-line prompt with powerline arrows
# --------------------------------------------------------------------------
format = """
[╭─](overlay0)\
$os\
$username\
$hostname\
[](surface1)\
[ ](bg:surface1 fg:blue)$directory\
[](fg:surface1 bg:surface0)\
$git_branch\
$git_status\
$git_state\
[](fg:surface0 bg:crust)\
$docker_context\
$python\
$nodejs\
$aws\
[](fg:crust)\
$fill\
$git_metrics\
$jobs\
$cmd_duration\
$status\
$line_break\
[╰─](overlay0)\
$character"""

add_newline = true
continuation_prompt = "[  ┆](overlay0) "

[fill]
symbol = "·"
style = "overlay0"

# --------------------------------------------------------------------------
# Character — vi mode arrows
# --------------------------------------------------------------------------
[character]
success_symbol = "[](bold green)"
error_symbol = "[](bold red)"
vimcmd_symbol = "[](bold blue)"
vimcmd_replace_one_symbol = "[](bold mauve)"
vimcmd_replace_symbol = "[](bold mauve)"
vimcmd_visual_symbol = "[](bold yellow)"

# --------------------------------------------------------------------------
# OS — leading icon
# --------------------------------------------------------------------------
[os]
disabled = false
format = "[ $symbol](fg:text bg:surface2)"
style = "fg:text bg:surface2"

[os.symbols]
Macos = ""
Linux = ""
Ubuntu = ""
Debian = ""
Fedora = ""
Arch = "󰣇"
Alpine = ""
Amazon = ""
CentOS = ""
Raspbian = ""
Windows = ""

# --------------------------------------------------------------------------
# Username & hostname — visible on SSH / root
# --------------------------------------------------------------------------
[username]
show_always = false
format = "[ $user](fg:peach bg:surface2)"
style_user = "fg:peach bg:surface2"
style_root = "fg:red bg:surface2"

[hostname]
ssh_only = true
format = "[@$hostname ](fg:peach bg:surface2)"
style = "fg:peach bg:surface2"
trim_at = "."

# --------------------------------------------------------------------------
# Directory
# --------------------------------------------------------------------------
[directory]
truncation_length = 4
truncation_symbol = "…/"
truncate_to_repo = true
style = "fg:blue bg:surface1"
read_only = " 󰌾"
read_only_style = "fg:red bg:surface1"
format = "[$path]($style)[$read_only]($read_only_style)[ ](bg:surface1)"

[directory.substitutions]
"Documents" = "󰈙 "
"Downloads" = " "
"Projects"  = " "
"~"         = " "

# --------------------------------------------------------------------------
# Git — branch + status in powerline segment
# --------------------------------------------------------------------------
[git_branch]
symbol = " "
format = "[ $symbol$branch(:$remote_branch) ](fg:mauve bg:surface0)"
style = "fg:mauve bg:surface0"
truncation_length = 30

[git_status]
format = '([$all_status$ahead_behind ](fg:yellow bg:surface0))'
style = "fg:yellow bg:surface0"
conflicted = "󰞇 "
ahead = "󰜸 ${count}"
behind = "󰜯 ${count}"
diverged = "󰃻 ${ahead_count}↑${behind_count}↓"
untracked = "󰋗 ${count}"
stashed = "󰏗 ${count}"
modified = "󰏫 ${count}"
staged = "󰐕 ${count}"
renamed = "󰑕 ${count}"
deleted = "󰍴 ${count}"

[git_state]
format = '[\($state $progress_current/$progress_total\) ](fg:peach bg:surface0)'
style = "fg:peach bg:surface0"

[git_metrics]
disabled = false
format = "([+$added](green) )([-$deleted](red) )"
added_style = "green"
deleted_style = "red"

# --------------------------------------------------------------------------
# Docker — whale segment
# --------------------------------------------------------------------------
[docker_context]
symbol = "󰡨 "
format = "[ $symbol$context ](fg:sky bg:crust)"
style = "fg:sky bg:crust"
only_with_files = true
detect_files = ["docker-compose.yml", "docker-compose.yaml", "Dockerfile", "compose.yml", "compose.yaml"]

# --------------------------------------------------------------------------
# Python — snake segment
# --------------------------------------------------------------------------
[python]
symbol = " "
format = '[ $symbol${pyenv_prefix}${version}( \($virtualenv\)) ](fg:yellow bg:crust)'
style = "fg:yellow bg:crust"
pyenv_version_name = true
detect_extensions = ["py"]
detect_files = [".python-version", "Pipfile", "pyproject.toml", "requirements.txt", "setup.py", "tox.ini"]

# --------------------------------------------------------------------------
# Node.js
# --------------------------------------------------------------------------
[nodejs]
symbol = "󰎙 "
format = "[ $symbol$version ](fg:green bg:crust)"
style = "fg:green bg:crust"
detect_extensions = ["js", "mjs", "cjs", "ts"]
detect_files = ["package.json", ".node-version", ".nvmrc"]

# --------------------------------------------------------------------------
# AWS — cloud segment
# --------------------------------------------------------------------------
[aws]
symbol = "󰸏 "
format = '[ $symbol$profile( \($region\)) ](fg:peach bg:crust)'
style = "fg:peach bg:crust"

[aws.region_aliases]
us-east-1      = "use1"
us-east-2      = "use2"
us-west-1      = "usw1"
us-west-2      = "usw2"
eu-west-1      = "euw1"
eu-central-1   = "euc1"
ap-southeast-1 = "apse1"

# --------------------------------------------------------------------------
# Command duration — right side
# --------------------------------------------------------------------------
[cmd_duration]
min_time = 3_000
format = "[󱎫 $duration](peach) "
style = "peach"
show_notifications = false

# --------------------------------------------------------------------------
# Background jobs
# --------------------------------------------------------------------------
[jobs]
symbol = "󰜎 "
format = "[$symbol$number](sapphire) "
style = "sapphire"
threshold = 1

# --------------------------------------------------------------------------
# Exit status — right side
# --------------------------------------------------------------------------
[status]
disabled = false
format = "[󰀨 $status](red) "
symbol = "󰀨"
style = "red"
map_symbol = true

# --------------------------------------------------------------------------
# Disabled — keep prompt lean
# --------------------------------------------------------------------------
[package]
disabled = true

[terraform]
disabled = true

[vagrant]
disabled = true

[nix_shell]
disabled = true

[memory_usage]
disabled = true

[battery]
disabled = true
